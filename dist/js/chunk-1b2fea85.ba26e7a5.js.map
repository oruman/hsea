{"version":3,"sources":["webpack:///./src/views/HallOfFame.vue?1817","webpack:///./src/services/studentsService.ts","webpack:///./src/services/groupsService.ts","webpack:///./src/views/HallOfFame.vue","webpack:///./src/views/HallOfFame.vue?67e0","webpack:///../../../src/mixins/intersectable/index.ts","webpack:///../../../src/components/VPagination/VPagination.ts","webpack:///./src/views/HallOfFame.vue?ed77"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","countMonth","model","value","callback","$$v","month","expression","scopedSlots","_u","key","fn","_v","_l","scoreStudent","index","iconForPlace","_s","_e","name","class","classForScore","score","scoreFixed","proxy","staticRenderFns","data","loadData","then","response","json","i","length","Object","prototype","hasOwnProperty","call","id","publish","STUDENTS_LOAD","GlobalStudentsService","GROUPS_LOAD","ret","push","GlobalGroupsService","students","scoreByMonth","scoreByStudents","currentMonth","subscribe","loadStudents","loadScore","unsubscribe","list","averageMarks","temp","studentId","classes","num","Math","max","item","toFixed","sort","a","b","cIndex","min","dIndex","c","d","window","mounted","onObserve","destroyed","methods","options","console","mixins","onVisible","directives","Resize","props","circle","disabled","type","default","validator","val","nextIcon","prevIcon","totalVisible","Number","pageAriaLabel","currentPageAriaLabel","previousAriaLabel","nextAriaLabel","wrapperAriaLabel","maxButtons","selected","computed","themeClasses","items","parseInt","maxLength","range","even","left","right","start","end","watch","init","setTimeout","onResize","width","$el","parentElement","next","e","previous","from","genIcon","h","label","on","click","genItem","color","isCurrentPage","ariaLabel","setBackgroundColor","$vuetify","lang","t","genItems","map","isNaN","genList","modifiers","quiet","children","rtl","role","component","VContainer","VIcon","VPagination","VSimpleTable"],"mappings":"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","file":"js/chunk-1b2fea85.ba26e7a5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('div',{staticClass:\"text-center\"},[_c('v-pagination',{attrs:{\"length\":_vm.countMonth},model:{value:(_vm.month),callback:function ($$v) {_vm.month=$$v},expression:\"month\"}})],1),_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{attrs:{\"width\":\"60\"}}),_c('th',[_vm._v(\"Name\")]),_c('th',{staticClass:\"text-center\",attrs:{\"width\":\"70\"}},[_vm._v(\"Score\")])])]),_c('tbody',_vm._l((_vm.sortedList),function(scoreStudent,index){return _c('tr',{key:index},[_c('td',[(_vm.iconForPlace(index))?_c('v-icon',[_vm._v(_vm._s(_vm.iconForPlace(index)))]):_vm._e()],1),_c('td',[_vm._v(_vm._s(scoreStudent.name))]),_c('td',{staticClass:\"text-center\",class:_vm.classForScore(scoreStudent.score)},[_vm._v(\" \"+_vm._s(scoreStudent.scoreFixed)+\" \")])])}),0)]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {\r\n  fetchWithTime,\r\n  validateJson,\r\n  validateStatus\r\n} from \"@/helpers/fetch-helpers\";\r\nimport { EventType, GlobalEvents } from \"@/services/eventSystem\";\r\n\r\nclass StudentsService {\r\n  private data: SimpleObject = {};\r\n\r\n  constructor() {\r\n    this.loadData();\r\n  }\r\n\r\n  public get list() {\r\n    return this.data;\r\n  }\r\n\r\n  private loadData() {\r\n    // https://my.hotspot.school/a/students\r\n    fetchWithTime(\"https://oruman.github.io/hsea/json/students.json\")\r\n      .then(validateStatus)\r\n      .then(response => response.json())\r\n      .then(validateJson)\r\n      .then(response => {\r\n        const data: SimpleObject = {};\r\n        for (let i = 0; i < response.length; i++) {\r\n          if (\r\n            !response[i] ||\r\n            !Object.prototype.hasOwnProperty.call(response[i], \"id\") ||\r\n            !Object.prototype.hasOwnProperty.call(response[i], \"name\")\r\n          )\r\n            continue;\r\n          data[response[i].id] = response[i].name;\r\n        }\r\n        this.data = data;\r\n        GlobalEvents.publish(EventType.STUDENTS_LOAD, null);\r\n      });\r\n  }\r\n}\r\n\r\nexport const GlobalStudentsService = new StudentsService();\r\n","import {\r\n  fetchWithTime,\r\n  validateJson,\r\n  validateStatus\r\n} from \"@/helpers/fetch-helpers\";\r\nimport { EventType, GlobalEvents } from \"@/services/eventSystem\";\r\n\r\nclass GroupsService {\r\n  private data: SimpleObject = {};\r\n\r\n  constructor() {\r\n    this.loadData();\r\n  }\r\n\r\n  public get averageMarks() {\r\n    const ret: SimpleObject[] = [];\r\n    if (\r\n      !Object.prototype.hasOwnProperty.call(this.data, \"average_marks\") ||\r\n      !Object.prototype.hasOwnProperty.call(\r\n        this.data[\"average_marks\"],\r\n        \"byMonth\"\r\n      ) ||\r\n      !Object.prototype.hasOwnProperty.call(\r\n        this.data[\"average_marks\"][\"byMonth\"],\r\n        \"count\"\r\n      )\r\n    )\r\n      return ret;\r\n    for (let i = 0; i < this.data[\"average_marks\"][\"byMonth\"][\"count\"]; i++) {\r\n      if (\r\n        !Object.prototype.hasOwnProperty.call(\r\n          this.data[\"average_marks\"][\"byMonth\"],\r\n          i\r\n        )\r\n      )\r\n        continue;\r\n      ret.push(this.data[\"average_marks\"][\"byMonth\"][i]);\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  private loadData() {\r\n    // https://my.hotspot.school/a/groups\r\n    fetchWithTime(\"https://oruman.github.io/hsea/json/groups.json\")\r\n      .then(validateStatus)\r\n      .then(response => response.json())\r\n      .then(validateJson)\r\n      .then(response => {\r\n        this.data = response[0];\r\n        GlobalEvents.publish(EventType.GROUPS_LOAD, null);\r\n      });\r\n  }\r\n}\r\n\r\nexport const GlobalGroupsService = new GroupsService();\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from \"vue-property-decorator\";\r\nimport { GlobalStudentsService } from \"@/services/studentsService\";\r\nimport { EventType, GlobalEvents } from \"@/services/eventSystem\";\r\nimport { GlobalGroupsService } from \"@/services/groupsService\";\r\n\r\n@Component\r\nexport default class HallOfFame extends Vue {\r\n  private students: SimpleObject = {};\r\n  private scoreByMonth: SimpleObject[] = [];\r\n  private scoreByStudents: SimpleObject = {};\r\n  private currentMonth = 0;\r\n\r\n  mounted() {\r\n    GlobalEvents.subscribe(EventType.STUDENTS_LOAD, this.loadStudents);\r\n    GlobalEvents.subscribe(EventType.GROUPS_LOAD, this.loadScore);\r\n    this.loadStudents();\r\n    this.loadScore();\r\n  }\r\n\r\n  beforeDestroy() {\r\n    GlobalEvents.unsubscribe(EventType.STUDENTS_LOAD, this.loadStudents);\r\n    GlobalEvents.unsubscribe(EventType.GROUPS_LOAD, this.loadScore);\r\n  }\r\n\r\n  private get month() {\r\n    return this.currentMonth + 1;\r\n  }\r\n\r\n  private set month(num: number) {\r\n    this.currentMonth = num - 1;\r\n  }\r\n\r\n  private get countMonth() {\r\n    return Math.max(this.scoreByMonth.length, 1);\r\n  }\r\n\r\n  private loadStudents() {\r\n    this.students = GlobalStudentsService.list;\r\n  }\r\n\r\n  private get sortedList() {\r\n    const ret: SimpleObject[] = [];\r\n    for (const studentId in this.scoreByMonth[this.currentMonth]) {\r\n      if (\r\n        !Object.prototype.hasOwnProperty.call(\r\n          this.scoreByMonth[this.currentMonth],\r\n          studentId\r\n        )\r\n      )\r\n        continue;\r\n      const item: SimpleObject = {\r\n        id: studentId,\r\n        score: this.scoreByMonth[this.currentMonth][studentId] || 0\r\n      };\r\n      item.scoreFixed = item.score ? item.score.toFixed(1) : \"N/A\";\r\n      item.name = this.students[studentId] || \"N/A\";\r\n      ret.push(item);\r\n    }\r\n    ret.sort((a, b) => {\r\n      if (a.score == b.score) {\r\n        const cIndex = Math.min(\r\n          this.scoreByStudents[a.id].length - 1,\r\n          this.month - 1\r\n        );\r\n        const dIndex = Math.min(\r\n          this.scoreByStudents[b.id].length - 1,\r\n          this.month - 1\r\n        );\r\n        const c = this.scoreByStudents[a.id][cIndex];\r\n        const d = this.scoreByStudents[b.id][dIndex];\r\n        if (c != d) return d - c;\r\n        return 0;\r\n      }\r\n      return b.score - a.score;\r\n    });\r\n    return ret;\r\n  }\r\n\r\n  private loadScore() {\r\n    const score = GlobalGroupsService.averageMarks;\r\n    const temp: SimpleObject = {};\r\n    for (let i = 0; i < score.length; i++) {\r\n      for (const studentId in score[i]) {\r\n        if (!Object.prototype.hasOwnProperty.call(score[i], studentId))\r\n          continue;\r\n        if (!Object.prototype.hasOwnProperty.call(temp, studentId)) {\r\n          temp[studentId] = [];\r\n          temp[studentId].push(0.0);\r\n        }\r\n        if (score[i][studentId]) temp[studentId].push(score[i][studentId]);\r\n      }\r\n    }\r\n    this.scoreByStudents = temp;\r\n    this.scoreByMonth = score;\r\n  }\r\n\r\n  private iconForPlace(index: number) {\r\n    const classes = [\"mdi-crown\", \"mdi-trophy-award\", \"mdi-seal\"];\r\n    return index < classes.length\r\n      ? classes[index]\r\n      : index <= 10\r\n      ? \"mdi-numeric-\" + (index + 1)\r\n      : \"\";\r\n  }\r\n\r\n  private classForScore(num: number) {\r\n    if (!num) return \"\";\r\n    if (num < 55) return \"error\";\r\n    if (num < 75) return \"warning\";\r\n    return \"success\";\r\n  }\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HallOfFame.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HallOfFame.vue?vue&type=script&lang=ts&\"","// Directives\nimport Intersect from '../../directives/intersect'\n\n// Utilities\nimport { consoleWarn } from '../../util/console'\n\n// Types\nimport Vue from 'vue'\n\nexport default function intersectable (options: { onVisible: string[] }) {\n  if (typeof window === 'undefined' || !('IntersectionObserver' in window)) {\n    // do nothing because intersection observer is not available\n    return Vue.extend({ name: 'intersectable' })\n  }\n\n  return Vue.extend({\n    name: 'intersectable',\n\n    mounted () {\n      Intersect.inserted(this.$el as HTMLElement, {\n        name: 'intersect',\n        value: this.onObserve,\n      })\n    },\n\n    destroyed () {\n      Intersect.unbind(this.$el as HTMLElement)\n    },\n\n    methods: {\n      onObserve (entries: IntersectionObserverEntry[], observer: IntersectionObserver, isIntersecting: boolean) {\n        if (!isIntersecting) return\n\n        for (let i = 0, length = options.onVisible.length; i < length; i++) {\n          const callback = (this as any)[options.onVisible[i]]\n\n          if (typeof callback === 'function') {\n            callback()\n            continue\n          }\n\n          consoleWarn(options.onVisible[i] + ' method is not available on the instance but referenced in intersectable mixin options')\n        }\n      },\n    },\n  })\n}\n","import './VPagination.sass'\n\nimport VIcon from '../VIcon'\n\n// Directives\nimport Resize from '../../directives/resize'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Intersectable from '../../mixins/intersectable'\nimport Themeable from '../../mixins/themeable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode, CreateElement, VNodeChildrenArrayContents } from 'vue'\n\n/* @vue/component */\nexport default mixins(\n  Colorable,\n  Intersectable({ onVisible: ['init'] }),\n  Themeable\n).extend({\n  name: 'v-pagination',\n\n  directives: { Resize },\n\n  props: {\n    circle: Boolean,\n    disabled: Boolean,\n    length: {\n      type: Number,\n      default: 0,\n      validator: (val: number) => val % 1 === 0,\n    },\n    nextIcon: {\n      type: String,\n      default: '$next',\n    },\n    prevIcon: {\n      type: String,\n      default: '$prev',\n    },\n    totalVisible: [Number, String],\n    value: {\n      type: Number,\n      default: 0,\n    },\n    pageAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.page',\n    },\n    currentPageAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.currentPage',\n    },\n    previousAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.previous',\n    },\n    nextAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.next',\n    },\n    wrapperAriaLabel: {\n      type: String,\n      default: '$vuetify.pagination.ariaLabel.wrapper',\n    },\n  },\n\n  data () {\n    return {\n      maxButtons: 0,\n      selected: null as number | null,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-pagination': true,\n        'v-pagination--circle': this.circle,\n        'v-pagination--disabled': this.disabled,\n        ...this.themeClasses,\n      }\n    },\n\n    items (): (string | number)[] {\n      const totalVisible = parseInt(this.totalVisible, 10)\n\n      const maxLength = Math.min(\n        Math.max(0, totalVisible) || this.length,\n        Math.max(0, this.maxButtons) || this.length,\n        this.length\n      )\n\n      if (this.length <= maxLength) {\n        return this.range(1, this.length)\n      }\n\n      const even = maxLength % 2 === 0 ? 1 : 0\n      const left = Math.floor(maxLength / 2)\n      const right = this.length - left + 1 + even\n\n      if (this.value > left && this.value < right) {\n        const start = this.value - left + 2\n        const end = this.value + left - 2 - even\n\n        return [1, '...', ...this.range(start, end), '...', this.length]\n      } else if (this.value === left) {\n        const end = this.value + left - 1 - even\n        return [...this.range(1, end), '...', this.length]\n      } else if (this.value === right) {\n        const start = this.value - left + 1\n        return [1, '...', ...this.range(start, this.length)]\n      } else {\n        return [\n          ...this.range(1, left),\n          '...',\n          ...this.range(right, this.length),\n        ]\n      }\n    },\n  },\n\n  watch: {\n    value () {\n      this.init()\n    },\n  },\n\n  mounted () {\n    this.init()\n  },\n\n  methods: {\n    init () {\n      this.selected = null\n\n      this.$nextTick(this.onResize)\n      // TODO: Change this (f75dee3a, cbdf7caa)\n      setTimeout(() => (this.selected = this.value), 100)\n    },\n    onResize () {\n      const width = this.$el && this.$el.parentElement\n        ? this.$el.parentElement.clientWidth\n        : window.innerWidth\n\n      this.maxButtons = Math.floor((width - 96) / 42)\n    },\n    next (e: Event) {\n      e.preventDefault()\n      this.$emit('input', this.value + 1)\n      this.$emit('next')\n    },\n    previous (e: Event) {\n      e.preventDefault()\n      this.$emit('input', this.value - 1)\n      this.$emit('previous')\n    },\n    range (from: number, to: number) {\n      const range = []\n\n      from = from > 0 ? from : 1\n\n      for (let i = from; i <= to; i++) {\n        range.push(i)\n      }\n\n      return range\n    },\n    genIcon (h: CreateElement, icon: string, disabled: boolean, fn: EventListener, label: String): VNode {\n      return h('li', [\n        h('button', {\n          staticClass: 'v-pagination__navigation',\n          class: {\n            'v-pagination__navigation--disabled': disabled,\n          },\n          attrs: {\n            type: 'button',\n            'aria-label': label,\n          },\n          on: disabled ? {} : { click: fn },\n        }, [h(VIcon, [icon])]),\n      ])\n    },\n    genItem (h: CreateElement, i: string | number): VNode {\n      const color: string | false = (i === this.value) && (this.color || 'primary')\n      const isCurrentPage = i === this.value\n      const ariaLabel = isCurrentPage ? this.currentPageAriaLabel : this.pageAriaLabel\n\n      return h('button', this.setBackgroundColor(color, {\n        staticClass: 'v-pagination__item',\n        class: {\n          'v-pagination__item--active': i === this.value,\n        },\n        attrs: {\n          type: 'button',\n          'aria-current': isCurrentPage,\n          'aria-label': this.$vuetify.lang.t(ariaLabel, i),\n        },\n        on: {\n          click: () => this.$emit('input', i),\n        },\n      }), [i.toString()])\n    },\n    genItems (h: CreateElement): VNode[] {\n      return this.items.map((i, index) => {\n        return h('li', { key: index }, [\n          isNaN(Number(i)) ? h('span', { class: 'v-pagination__more' }, [i.toString()]) : this.genItem(h, i),\n        ])\n      })\n    },\n    genList (h: CreateElement, children: VNodeChildrenArrayContents): VNode {\n      return h('ul', {\n        directives: [{\n          modifiers: { quiet: true },\n          name: 'resize',\n          value: this.onResize,\n        }],\n        class: this.classes,\n      }, children)\n    },\n  },\n\n  render (h): VNode {\n    const children = [\n      this.genIcon(h,\n        this.$vuetify.rtl ? this.nextIcon : this.prevIcon,\n        this.value <= 1,\n        this.previous,\n        this.$vuetify.lang.t(this.previousAriaLabel)),\n      this.genItems(h),\n      this.genIcon(h,\n        this.$vuetify.rtl ? this.prevIcon : this.nextIcon,\n        this.value >= this.length,\n        this.next,\n        this.$vuetify.lang.t(this.nextAriaLabel)),\n    ]\n\n    return h('nav', {\n      attrs: {\n        role: 'navigation',\n        'aria-label': this.$vuetify.lang.t(this.wrapperAriaLabel),\n      },\n    }, [this.genList(h, children)])\n  },\n})\n","import { render, staticRenderFns } from \"./HallOfFame.vue?vue&type=template&id=1dbfa0a6&\"\nimport script from \"./HallOfFame.vue?vue&type=script&lang=ts&\"\nexport * from \"./HallOfFame.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VPagination } from 'vuetify/lib/components/VPagination';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\ninstallComponents(component, {VContainer,VIcon,VPagination,VSimpleTable})\n"],"sourceRoot":""}